# Testovoe_for_SKBlab
### Это решение тестового задания от SKB
# Эндпоинты
## POST http://localhost:8008/auth/signup
### Принимает данные в формате JSON для регистрации пользователя на сервисе;
### Входные данные проверяются на валидность;
### При повторной попытке регистрации той же почты возвращается ошибка;
### После сохранения в БД со статусом "waiting" сообщение о рассмотрение формы отправляется на внешний сервис с помощью Kafka;
### После получения ответа через kafka статус формы изменяется и ответ подтверждении или отказе отправляется пользователю на email;
### Эндпоинт возвращает результат операции, id формы в БД, саму форму;
## GET http://localhost:8008/auth/signup?id=
### Принимает в query параметре id пользователя, полученный из прошлого эндпоинта;
### Эндпоинт необходим в случае, если сообщение по каким-то причинам не отправилось пользователю на почту, и пользователь хочет узнать статус своей формы;
### Эндпоинт возвращает форму регистрации пользователя из БД;
## Внешний сервис
### Делает задержку 10-30, симулирую работу человека или загруженного сервиса;
### Принятие и отказ формы выбирается рандомно;


## Kafka была выбрана с целью упростить связь между сервисами и обеспечить возможность масштабирования в будущей перспективе для messaging решения;
## Уникальность email-поля формы регистрации было добавлено, чтобы исключить возможность повторной регистрации пользователей.
## В реальном приложении я бы добавил отдельный сервис пользователей, который бы пополнялся после разрешения регистрации от внешнего сервиса.
## Также я бы отделил логику рассылки на почты в отдельный сервис, чтобы обеспечить дополнительную отказоустойчивость всего приложения. В данном ТЗ я не увидел в этом надобности;
## Ну и валидация добавлена, чтобы исключить оплошность пользователя или фронта.
